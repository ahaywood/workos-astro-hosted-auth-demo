---
import { WorkOS } from "@workos-inc/node";

const workos = new WorkOS(import.meta.env.WORKOS_API_KEY);
const clientId = import.meta.env.WORKOS_CLIENT_ID;

const authorizationUrl = workos.userManagement.getAuthorizationUrl({
  // Specify that we'd like AuthKit to handle the authentication flow
  provider: "authkit",

  // The callback endpoint that WorkOS will redirect to after a user authenticates
  redirectUri: "http://localhost:4321/api/callback",
  clientId,
});

// console.log({ authorizationUrl });
return Astro.redirect(authorizationUrl);
---
